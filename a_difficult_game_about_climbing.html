<!DOCTYPE html>
<html lang="en-us">
  <head>
    <base href="https://cdn.jsdelivr.net/gh/web-ports/adgac@main/">
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Unity WebGL Player | A Difficult Game About Climbing</title>
    <link rel="shortcut icon" href="TemplateData/favicon.ico">
    <link rel="stylesheet" href="TemplateData/style.css">
    <style>
        html,
        body {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
            background: #231F20;
        }

        #unity-container {
            width: 100%;
            height: 100%;
            position: fixed;
            top: 0;
            left: 0;
        }
    </style>
  </head>
  <body>
	<div id="loading-text" style="color: white; font-size: 48px; font-family: cursive; text-align: center; margin-top: 20px;"> LOADING... </div>
    <div id="unity-container" class="unity-desktop" hidden>
      <canvas id="unity-canvas" width=960 height=600 tabindex="-1"></canvas>
      <div id="unity-loading-bar">
        <div id="unity-logo"></div>
        <div id="unity-progress-bar-empty">
          <div id="unity-progress-bar-full"></div>
        </div>
      </div>
    </div>
    <script>
        var loadingText = document.querySelector("#loading-text");
        let totalBytes = 0;
        let loadedBytes = 0;

        async function fetchWithProgress(url) {
            const response = await fetch(url);
            const reader = response.body.getReader();
            let chunks = [];
            let received = 0;
            while (true) {
                const {
                    done,
                    value
                } = await reader.read();
                if (done) break;
                received += value.length;
                loadedBytes += value.length;
                chunks.push(value);
                let mbDone = (loadedBytes / (1024 * 1024)).toFixed(2);
                let mbTotal = '319.89';
                loadingText.textContent = `LOADING... ${mbDone} MB / ${mbTotal} MB`;
            }
            let fullBuffer = new Uint8Array(received);
            let offset = 0;
            for (let chunk of chunks) {
                fullBuffer.set(chunk, offset);
                offset += chunk.length;
            }
            return fullBuffer.buffer;
        }
        async function mergeFiles(fileParts, cacheKey) {
            const buffers = await Promise.all(
                fileParts.map(part => fetchWithProgress(part))
            );
            const mergedBlob = new Blob(buffers);
            return URL.createObjectURL(mergedBlob);
        }

        function getParts(file, start, end) {
            let parts = [];
            for (let i = start; i <= end; i++) {
                parts.push(file + ".part" + i);
            }
            return parts;
        }
        (async () => {
            const [dataUrl, wasmUrl] = await Promise.all([
                mergeFiles(getParts("Build/adgac.data", 1, 14), "gtagwebR2.data"),
                mergeFiles(getParts("Build/adgac.wasm", 1, 3), "gtagwebR2.wasm"),
            ]);
            var buildUrl = "Build";
      var loaderUrl = buildUrl + "/adgac.loader.js";
      var config = {
        dataUrl: dataUrl,
        frameworkUrl: "Build/adgac.framework.js",
        codeUrl: wasmUrl,
        streamingAssetsUrl: "StreamingAssets",
        companyName: "Pontypants",
        productName: "A Difficult Game About Climbing",
        productVersion: "1.2.61",
        // matchWebGLToCanvasSize: false, // Uncomment this to separately control WebGL canvas render size and DOM element size.
        // devicePixelRatio: 1, // Uncomment this to override low DPI rendering on high DPI displays.
      };
            var container = document.querySelector("#unity-container");
            container.hidden = false;
            var canvas = document.querySelector("#unity-canvas");
            var loadingBar = document.querySelector("#unity-loading-bar");
            var progressBarFull = document.querySelector("#unity-progress-bar-full");
            if (/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)) {
                container.className = "unity-mobile";
                config.devicePixelRatio = 1;
            } else {
                if (/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)) {
                    var meta = document.createElement('meta');
                    meta.name = 'viewport';
                    meta.content = 'width=device-width, height=device-height, initial-scale=1.0, user-scalable=no, shrink-to-fit=yes';
                    document.getElementsByTagName('head')[0].appendChild(meta);
                    container.className = "unity-mobile";
                    canvas.className = "unity-mobile";
                } else {
                    function resizeCanvas() {
                        canvas.width = window.innerWidth;
                        canvas.height = window.innerHeight;
                        canvas.style.width = window.innerWidth + "px";
                        canvas.style.height = window.innerHeight + "px";
                    }
                    resizeCanvas();
                    window.addEventListener('resize', resizeCanvas);
                }
            }
            loadingBar.style.display = "block";
            var script = document.createElement("script");
            script.src = loaderUrl;
            script.onload = () => {
                createUnityInstance(canvas, config, (progress) => {
                    progressBarFull.style.width = 100 * progress + "%";
                }).then((unityInstance) => {
                    loadingText.remove();
					console.log(loadedBytes)
                    loadingBar.style.display = "none";
                    canvas.style.display = "block";
                }).catch(async (message) => {
                    alert(message);
                });

            };
            document.body.appendChild(script);
        })();
    </script>
  
	   <!-- Downloaded From Noah's Tutoring Hub -->
	   <script>
	       console.log('%cðŸ”„ Loading game downloaded from Noah\'s Tutoring Hub', 'color: #c27c15; font-weight: bold;');
	   </script>
	   
	   <div id="noahs-watermark" 
	        onclick="window.open('https://noahs-calculus-tutor.pages.dev/', '_blank'); this.style.transform='scale(0.95)'; setTimeout(() => this.style.transform='scale(1)', 100);"
	        ontouchstart="this.style.opacity='0.7';"
	        ontouchend="this.style.opacity='0.9'; setTimeout(() => window.open('https://noahs-calculus-tutor.pages.dev/', '_blank'), 100);"
	        style="
	           all: initial !important;
	           position: fixed !important;
	           bottom: 10px !important;
	           right: 10px !important;
	           background: rgba(0, 0, 0, 0.85) !important;
	           color: #c27c15 !important;
	           padding: 8px 12px !important;
	           border-radius: 5px !important;
	           font-family: 'Courier New', monospace !important;
	           font-size: 12px !important;
	           z-index: 2147483647 !important;
	           border: 1px solid #c27c15 !important;
	           opacity: 0.9 !important;
	           pointer-events: auto !important;
	           cursor: pointer !important;
	           display: flex !important;
	           align-items: center !important;
	           gap: 8px !important;
	           backdrop-filter: blur(4px) !important;
	           box-shadow: 0 0 15px rgba(194, 124, 21, 0.4) !important;
	           transition: opacity 0.2s, transform 0.1s !important;
	           user-select: none !important;
	           -webkit-tap-highlight-color: transparent !important;
	       ">
	       <img src="https://raw.githubusercontent.com/NoahsAmazingTutoringHelp/Noahs-Calculus-Tutor/master/cuh.png" 
	            alt="Noah's Tutoring Hub" 
	            style="width: 16px !important; height: 16px !important; border-radius: 3px !important; pointer-events: none !important;"
	            onerror="this.style.display='none'">
	       <span style="pointer-events: none !important;">Downloaded from Noah's Tutoring Hub</span>
	   </div>
	
	   <script>
	       (function() {
	           var gameTitle = "A Difficult Game About Climbing";

	           function createWatermark() {
	               const watermark = document.createElement('div');
	               watermark.id = 'noahs-watermark';
	 
	               const logo = document.createElement('img');
	               logo.src = 'https://raw.githubusercontent.com/NoahsAmazingTutoringHelp/Noahs-Calculus-Tutor/master/cuh.png';
	               logo.alt = "Noah's Tutoring Hub";
	               logo.style.cssText = 'width: 16px !important; height: 16px !important; border-radius: 3px !important; display: block !important; pointer-events: none !important;';

	               const text = document.createElement('span');
	               text.textContent = 'Downloaded from Noah\'s Tutoring Hub';
	               text.style.cssText = 'pointer-events: none !important;';

	               watermark.appendChild(logo);
	               watermark.appendChild(text);

	               watermark.setAttribute('style', 
	                   'all: initial !important;' +
	                   'position: fixed !important;' +
	                   'bottom: 10px !important;' +
	                   'right: 10px !important;' +
	                   'background: rgba(0, 0, 0, 0.85) !important;' +
	                   'color: #c27c15 !important;' +
	                   'padding: 8px 12px !important;' +
	                   'border-radius: 5px !important;' +
	                   'font-family: \'Courier New\', monospace !important;' +
	                   'font-size: 12px !important;' +
	                   'z-index: 2147483647 !important;' +
	                   'border: 1px solid #c27c15 !important;' +
	                   'opacity: 0.9 !important;' +
	                   'pointer-events: auto !important;' +
	                   'cursor: pointer !important;' +
	                   'display: flex !important;' +
	                   'align-items: center !important;' +
	                   'gap: 8px !important;' +
	                   'backdrop-filter: blur(4px) !important;' +
	                   'box-shadow: 0 0 15px rgba(194, 124, 21, 0.4) !important;' +
	                   'transition: opacity 0.2s, transform 0.1s, box-shadow 0.2s, border-color 0.2s !important;' +
	                   'user-select: none !important;' +
	                   '-webkit-tap-highlight-color: transparent !important;'
	               );

	               logo.onerror = function() {
	                   this.style.display = 'none';
	                   watermark.setAttribute('style', watermark.getAttribute('style') + 'padding-left: 12px !important;');
	               };

	               watermark.setAttribute('role', 'button');
	               watermark.setAttribute('aria-label', 'Visit Noah\'s Tutoring Hub website');
	               watermark.setAttribute('tabindex', '0');

	               watermark.addEventListener('click', function(e) {
	                   e.preventDefault();
	                   e.stopPropagation();

	                   this.style.transform = 'scale(0.95) !important';
	                   this.style.transition = 'transform 0.1s !important';
	                   
	                   setTimeout(() => {
	                       this.style.transform = 'scale(1) !important';
	                       window.open('https://noahs-calculus-tutor.pages.dev/', '_blank');
	                   }, 100);
	               });

	               watermark.addEventListener('touchstart', function(e) {
	                   e.preventDefault();
	                   e.stopPropagation();
	                   this.style.opacity = '0.7 !important';
	               });
	               
	               watermark.addEventListener('touchend', function(e) {
	                   e.preventDefault();
	                   e.stopPropagation();
	                   this.style.opacity = '0.9 !important';

	                   this.style.transform = 'scale(0.95) !important';
	                   
	                   setTimeout(() => {
	                       this.style.transform = 'scale(1) !important';
	                       window.open('https://noahs-calculus-tutor.pages.dev/', '_blank');
	                   }, 100);
	               });

	               watermark.addEventListener('keydown', function(e) {
	                   if (e.key === 'Enter' || e.key === ' ') {
	                       e.preventDefault();
	                       window.open('https://noahs-calculus-tutor.pages.dev/', '_blank');
	                   }
	               });

	               watermark.addEventListener('mouseenter', function() {
	                   this.style.opacity = '1 !important';
	                   this.style.transform = 'translateY(-2px) !important';
	                   this.style.boxShadow = '0 0 25px rgba(194, 124, 21, 0.8) !important';
	                   this.style.borderColor = '#e69500 !important';
	               });
	               
	               watermark.addEventListener('mouseleave', function() {
	                   this.style.opacity = '0.9 !important';
	                   this.style.transform = 'translateY(0) !important';
	                   this.style.boxShadow = '0 0 15px rgba(194, 124, 21, 0.4) !important';
	                   this.style.borderColor = '#c27c15 !important';
	               });

	               watermark.addEventListener('contextmenu', function(e) {
	                   e.preventDefault();
	                   return false;
	               });
	               
	               return watermark;
	           }

	           function addWatermark() {
	               const existing = document.getElementById('noahs-watermark');
	               if (!existing) {
	                   document.body.appendChild(createWatermark());
	               }
	           }

	           function protectWatermark() {
	               addWatermark();

	               const observer = new MutationObserver(function(mutations) {
	                   mutations.forEach(function(mutation) {
	                       if (mutation.removedNodes) {
	                           Array.from(mutation.removedNodes).forEach(function(node) {
	                               if (node.id === 'noahs-watermark' || 
	                                   (node.querySelector && node.querySelector('#noahs-watermark'))) {
	                                   setTimeout(addWatermark, 100);
	                               }
	                           });
	                       }
	                   });
	               });
	               
	               observer.observe(document.body, {
	                   childList: true,
	                   subtree: true
	               });

	               setInterval(addWatermark, 5000);
	           }

	           if (document.readyState === 'loading') {
	               document.addEventListener('DOMContentLoaded', protectWatermark);
	           } else {
	               protectWatermark();
	           }

	           console.log('%cðŸŽ® Game: "' + gameTitle + '", Downloaded from Noah\'s Tutoring Hub', 
	               'color: #c27c15; font-weight: bold; font-size: 14px;');
	           console.log('%cðŸ“š Visit https://noahs-calculus-tutor.pages.dev/ for more games!', 
	               'color: #e69500;');
	       })();
	   </script>
	</body>
</html>